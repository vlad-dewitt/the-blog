(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{189:function(e,t,a){e.exports=a(327)},327:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(49),l=a.n(c),o=a(26),i=(a(194),a(18)),u=a(9),s=a.n(u),m=a(16),f=a(17),d=a(42),p=a(343),h=a(336),g=a(335),v=function(){var e=Object(m.a)(s.a.mark((function e(t){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,localStorage.getItem(t);case 2:return a=e.sent,e.abrupt("return",JSON.parse(a));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),E=function(){var e=Object(m.a)(s.a.mark((function e(t,a){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,localStorage.setItem(t,JSON.stringify(a));case 2:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),b=function(){var e=Object(m.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,localStorage.removeItem(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=function(){return new Promise(function(){var e=Object(m.a)(s.a.mark((function e(t,a){var n,r,c,l,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v("auth");case 2:if((n=e.sent)&&n.userId&&n.token){e.next=5;break}return e.abrupt("return",t(null));case 5:return e.next=7,fetch("/api/auth/verify",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:n.userId,token:n.token})});case 7:return r=e.sent,e.next=10,r.json();case 10:return c=e.sent,r.ok||a(c.message||"Something went wrong..."),l=c.userId,o=c.token,e.next=15,E("auth",{userId:l,token:o});case 15:t(c);case 16:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}())},x=function(e,t){return new Promise(function(){var a=Object(m.a)(s.a.mark((function a(n,r){var c,l,o,i;return s.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,password:t})});case 2:return c=a.sent,a.next=5,c.json();case 5:return l=a.sent,c.ok||r(l.message||"Something went wrong..."),o=l.userId,i=l.token,a.next=10,E("auth",{userId:o,token:i});case 10:n(l);case 11:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}())},y=function(e,t){return new Promise(function(){var a=Object(m.a)(s.a.mark((function a(n,r){var c,l;return s.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,fetch("/api/auth/sign-up",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,password:t})});case 2:return c=a.sent,a.next=5,c.json();case 5:l=a.sent,c.ok||r(l.message||"Something went wrong..."),x(e,t).then((function(e){n(e)})).catch((function(e){r(l.message||"Something went wrong...")}));case 8:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}())},j=a(347),O=a(90),k=a(346),S=a(43),C=function(){return new Promise(function(){var e=Object(m.a)(s.a.mark((function e(t,a){var n,r,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v("auth");case 2:if((n=e.sent)&&n.userId&&n.token){e.next=5;break}return e.abrupt("return",t(null));case 5:return e.next=7,fetch("/api/feed/feed-length",{method:"GET",headers:{"Content-Type":"application/json",Authorization:n.token}});case 7:return r=e.sent,e.next=10,r.json();case 10:c=e.sent,r.ok||a(c.message||"Something went wrong..."),t(c);case 13:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}())},P=function(e){return new Promise(function(){var t=Object(m.a)(s.a.mark((function t(a,n){var r,c,l,o;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v("auth");case 2:if((r=t.sent)&&r.userId&&r.token){t.next=5;break}return t.abrupt("return",a(null));case 5:return c=e?"/api/feed?index=".concat(e):"/api/feed",t.next=8,fetch(c,{method:"GET",headers:{"Content-Type":"application/json",Authorization:r.token}});case 8:return l=t.sent,t.next=11,l.json();case 11:o=t.sent,l.ok||n(o.message||"Something went wrong..."),a(o);case 14:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}())},A=function(e){return new Promise(function(){var t=Object(m.a)(s.a.mark((function t(a,n){var r,c,l;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v("auth");case 2:if((r=t.sent)&&r.userId&&r.token){t.next=5;break}return t.abrupt("return",a(null));case 5:return t.next=7,fetch("/api/feed/".concat(e),{method:"GET",headers:{"Content-Type":"application/json",Authorization:r.token}});case 7:return c=t.sent,t.next=10,c.json();case 10:l=t.sent,c.ok||n(l.message||"Something went wrong..."),a(l);case 13:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}())},I=function(e){var t=e.feed_length,a=e.setFeedLength,n=Object(d.h)().pathname;return r.a.useEffect((function(){(function(){var e=Object(m.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C();case 2:t=e.sent,a(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[a]),r.a.createElement(j.a,{fixed:"top",borderless:!0,style:{padding:"6px 10%"}},r.a.createElement(j.a.Item,null,r.a.createElement("img",{src:"/logo.png",alt:"The Blog Logo"})),r.a.createElement(j.a.Item,{as:o.b,to:"/",name:"home",active:"/"===n}),r.a.createElement(j.a.Item,{as:o.b,to:"/feed",name:"feed",active:"/feed"===n},"Feed",r.a.createElement(O.a,{color:"blue"},t)),r.a.createElement(j.a.Menu,{position:"right"},"/feed/create"!==n?r.a.createElement(j.a.Item,null,r.a.createElement(k.a,{as:o.b,to:"/feed/create",primary:!0,icon:!0,labelPosition:"right"},"Write Post",r.a.createElement(S.a,{name:"write square"}))):null,r.a.createElement(j.a.Item,{as:o.b,to:"/profile",name:"profile",active:"/profile"===n},r.a.createElement(S.a,{name:"user"}),"Profile")))},T=a(19),_=a(348),L=a(349),Y=a(350),M=a(337),z=a(344),J=function(e){var t=e.onAuth,a=r.a.useState({username:{value:"",valid:null,validate:function(e){return e.length>=4}},password:{value:"",valid:null,validate:function(e){return e.length>=6}}}),n=Object(f.a)(a,2),c=n[0],l=n[1],o=r.a.useState(!1),u=Object(f.a)(o,2),s=u[0],m=u[1],d=r.a.useState({show:!1,message:""}),p=Object(f.a)(d,2),h=p[0],v=p[1],E=function(e){l(Object(i.a)({},c,Object(T.a)({},e.target.name,Object(i.a)({},c[e.target.name],{valid:null,value:e.target.value.replace(/[^A-z0-9._-]/g,"")}))))},b=function(e){var a=Object(i.a)({},c);for(var n in c)a=Object(i.a)({},a,Object(T.a)({},n,Object(i.a)({},a[n],{valid:a[n].validate(a[n].value)})));if(l(a),a.username.valid&&a.password.valid){var r="login"===e?x:y;m(!0),r(a.username.value,a.password.value).then((function(e){v({show:!1,message:""}),t(e)})).catch((function(e){m(!1),v({show:!0,message:e})}))}};return r.a.createElement(_.a,{centered:!0,container:!0,columns:"12",verticalAlign:"middle",style:{minHeight:"90vh"}},r.a.createElement(_.a.Column,{width:"6"},r.a.createElement(L.a,{as:"h2",icon:!0,textAlign:"center"},r.a.createElement(S.a,{name:"user outline"}),"Authentication Page",r.a.createElement(L.a.Subheader,null,"Please login or sign up to continue.")),r.a.createElement(Y.a,{placeholder:!0,style:{margin:"3em 0",padding:"0"}},r.a.createElement(M.a,{error:h.show,loading:s,style:{padding:"5em 0"}},r.a.createElement(M.a.Input,{icon:"user",iconPosition:"left",name:"username",label:"Username",placeholder:"Username",value:c.username.value,onChange:E,error:!1===c.username.valid&&{content:"Username should contains minimum 4 symbols",pointing:"above"}}),r.a.createElement(M.a.Input,{icon:"lock",iconPosition:"left",name:"password",label:"Password",type:"password",value:c.password.value,onChange:E,error:!1===c.password.valid&&{content:"Password should contains minimum 6 symbols",pointing:"above"}}),r.a.createElement(z.a,{error:!0,header:"Error",content:h.message,style:{maxWidth:"15rem",margin:"0 auto"}}),r.a.createElement(g.a,{fluid:!0,textAlign:"center",style:{marginTop:"2em"}},r.a.createElement(k.a.Group,null,r.a.createElement(k.a,{content:"Login",primary:!0,onClick:function(){return b("login")}}),r.a.createElement(k.a.Or,null),r.a.createElement(k.a,{content:"Sign up",secondary:!0,onClick:function(){return b("sign_up")}})))))))},N=a(342),H=function(){return r.a.createElement(_.a,{centered:!0,container:!0,columns:"12",style:{minHeight:"80vh"}},r.a.createElement(_.a.Column,{width:"6",verticalAlign:"middle"},r.a.createElement(Y.a,{placeholder:!0,style:{padding:"1em 0 2em"}},r.a.createElement(L.a,{as:"h3",icon:!0,textAlign:"center",style:{margin:"1em 0"}},r.a.createElement(S.a,{name:"home"}),"Welcome to The Blog!",r.a.createElement(L.a.Subheader,null,"This application is developed as a test task.",r.a.createElement("br",null),"What features does this app have:")),r.a.createElement(N.a,null,r.a.createElement(N.a.Item,{content:"Sign up/Login, edit Profile"}),r.a.createElement(N.a.Item,{content:"Create posts in a shared feed"}),r.a.createElement(N.a.Item,{content:"View posts feed"}),r.a.createElement(N.a.Item,{content:"Comment posts"})),r.a.createElement(N.a,null,r.a.createElement(O.a,null,r.a.createElement(S.a,{name:"bitbucket"}),r.a.createElement("a",{href:"https://bitbucket.org/vlad-dewitt/the-blog",target:"_blank",rel:"noopener noreferrer"},"Source Code")),r.a.createElement(O.a,null,r.a.createElement(S.a,{name:"mail"}),r.a.createElement("a",{href:"mailto:dewitt.official@gmail.com"},"dewitt.official@gmail.com"))))))},W=a(120),F=a(339),G=function(e){var t=e.onPostCreated,a=Object(d.g)(),n=r.a.useState({text:{value:"",valid:null,validate:function(e){return e.length>=20}}}),c=Object(f.a)(n,2),l=c[0],u=c[1],p=r.a.useState(!1),h=Object(f.a)(p,2),E=h[0],b=h[1],w=r.a.useState({show:!1,message:""}),x=Object(f.a)(w,2),y=x[0],j=x[1];return r.a.createElement(g.a,{textAlign:"left"},r.a.createElement(M.a,{error:y.show,loading:E,style:{padding:"5em 0 2em"}},r.a.createElement(M.a.TextArea,{name:"text",label:"Post text",placeholder:"Write something here...",value:l.text.value,onChange:function(e){u(Object(i.a)({},l,Object(T.a)({},e.target.name,Object(i.a)({},l[e.target.name],{valid:null,value:e.target.value}))))},error:!1===l.text.valid&&{content:"Post should contains minimum 20 symbols",pointing:"above"}}),r.a.createElement(z.a,{error:!0,header:"Error",content:y.message}),r.a.createElement(g.a,{fluid:!0,textAlign:"right",style:{marginTop:"2em"}},r.a.createElement(k.a,{primary:!0,icon:!0,labelPosition:"left",onClick:function(){var e,n=Object(i.a)({},l);for(var r in l)n=Object(i.a)({},n,Object(T.a)({},r,Object(i.a)({},n[r],{valid:n[r].validate(n[r].value)})));u(n),n.text.valid&&(b(!0),(e=n.text.value,new Promise(function(){var t=Object(m.a)(s.a.mark((function t(a,n){var r,c,l;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v("auth");case 2:if((r=t.sent)&&r.userId&&r.token){t.next=5;break}return t.abrupt("return",a(null));case 5:return t.next=7,fetch("/api/feed/create",{method:"POST",headers:{"Content-Type":"application/json",Authorization:r.token},body:JSON.stringify({text:e})});case 7:return c=t.sent,t.next=10,c.json();case 10:l=t.sent,c.ok||n(l.message||"Something went wrong..."),a(l);case 13:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}())).then((function(e){j({show:!1,message:""}),t(),a.push("/feed")})).catch((function(e){b(!1),j({show:!0,message:e})})))}},r.a.createElement(S.a,{name:"share square"}),"Post it"),r.a.createElement(k.a,{as:o.b,to:"/feed"},"Cancel"))))},B=a(60),D=a.n(B),U=a(345),q=function(e){var t=e.post;return e.placeholder?r.a.createElement(U.a,{fluid:!0,style:{margin:"4em 0"}},r.a.createElement(U.a.Header,{image:!0},r.a.createElement(U.a.Line,null),r.a.createElement(U.a.Line,{length:"full"}))):r.a.createElement(F.a.Event,{style:{margin:"2em 0"}},r.a.createElement(F.a.Label,null,r.a.createElement("img",{src:t.author.profile.avatar,alt:t.author.profile.full_name||t.author.username})),r.a.createElement(F.a.Content,null,r.a.createElement(F.a.Summary,null,t.author.profile.full_name||t.author.username,r.a.createElement(F.a.Date,null,D()(t.date_created).format("MMM Do YYYY, h:mm a"))),r.a.createElement(F.a.Extra,{as:o.b,to:"/feed/".concat(t.id),text:!0},r.a.createElement("p",{style:{margin:".5em 0"}},t.text)),r.a.createElement(O.a,null,r.a.createElement(S.a,{name:"comment"}),t.comments)))},R=function(e){var t=e.feed_length,a=e.setFeedLength,n=r.a.useState(!0),c=Object(f.a)(n,2),l=c[0],o=c[1],i=r.a.useState([]),u=Object(f.a)(i,2),p=u[0],h=u[1];r.a.useEffect((function(){g()}),[]),r.a.useEffect((function(){(function(){var e=Object(m.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C();case 2:t=e.sent,a(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[p,a]);var g=function(){var e=Object(m.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P();case 2:t=e.sent,h(t),o(!1);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),v=function(){var e=Object(m.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P(p.length);case 2:t=e.sent,h([].concat(Object(W.a)(p),Object(W.a)(t)));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(_.a,{centered:!0,container:!0,columns:"12",style:{minHeight:"80vh"}},r.a.createElement(_.a.Column,{width:"8",verticalAlign:"middle"},l?[1,2,3,4,5].map((function(e){return r.a.createElement(q,{key:e,placeholder:!0})})):r.a.createElement(r.a.Fragment,null,r.a.createElement(d.b,{path:"/feed/create",render:function(){return r.a.createElement(G,{onPostCreated:g})}}),0===p.length?r.a.createElement(Y.a,{placeholder:!0},r.a.createElement(L.a,{as:"h3",icon:!0,textAlign:"center",style:{margin:"1em 0"}},r.a.createElement(S.a,{name:"circle outline"}),"No posts found yet.")):r.a.createElement(F.a,{size:"large"},p.map((function(e,t){return r.a.createElement(q,{key:e.id+t,post:e})})),t>p.length?r.a.createElement(k.a,{primary:!0,icon:!0,labelPosition:"left",onClick:v},r.a.createElement(S.a,{name:"sort"}),"Show more"):null))))},V=a(341),$=a(340),K=function(e){var t=e.post_id,a=e.onPostComment,n=r.a.useState({text:{value:"",valid:null,validate:function(e){return e.length>=2}}}),c=Object(f.a)(n,2),l=c[0],o=c[1],u=r.a.useState(!1),d=Object(f.a)(u,2),p=d[0],h=d[1],E=r.a.useState({show:!1,message:""}),b=Object(f.a)(E,2),w=b[0],x=b[1];return r.a.createElement(M.a,{error:w.show,loading:p,style:{marginTop:"2em"}},r.a.createElement(M.a.TextArea,{name:"text",placeholder:"Write your comment...",value:l.text.value,onChange:function(e){o(Object(i.a)({},l,Object(T.a)({},e.target.name,Object(i.a)({},l[e.target.name],{valid:null,value:e.target.value}))))},error:!1===l.text.valid&&{content:"Comment should contains minimum 2 symbols",pointing:"above"}}),r.a.createElement(z.a,{error:!0,header:"Error",content:w.message}),r.a.createElement(g.a,{fluid:!0,textAlign:"right"},r.a.createElement(k.a,{primary:!0,icon:!0,labelPosition:"left",onClick:function(){var e=Object(i.a)({},l);for(var n in l)e=Object(i.a)({},e,Object(T.a)({},n,Object(i.a)({},e[n],{valid:e[n].validate(e[n].value)})));o(e),e.text.valid&&(h(!0),function(e,t){return new Promise(function(){var a=Object(m.a)(s.a.mark((function a(n,r){var c,l,o;return s.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,v("auth");case 2:if((c=a.sent)&&c.userId&&c.token){a.next=5;break}return a.abrupt("return",n(null));case 5:return a.next=7,fetch("/api/feed/comment",{method:"POST",headers:{"Content-Type":"application/json",Authorization:c.token},body:JSON.stringify({post_id:e,text:t})});case 7:return l=a.sent,a.next=10,l.json();case 10:o=a.sent,l.ok||r(o.message||"Something went wrong..."),n(o);case 13:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}())}(t,e.text.value).then((function(e){x({show:!1,message:""}),a(),o({text:{value:"",valid:null,validate:function(e){return e.length>=2}}}),h(!1)})).catch((function(e){h(!1),x({show:!0,message:e})})))}},"Post comment",r.a.createElement(S.a,{name:"edit"}))))},Q=function(e){var t=e.data;return r.a.createElement($.a,{style:{margin:"1em 0"}},r.a.createElement($.a.Avatar,{as:"a",src:t.author.profile.avatar}),r.a.createElement($.a.Content,null,r.a.createElement($.a.Author,{as:"a"},t.author.profile.full_name||t.author.username),r.a.createElement($.a.Metadata,null,r.a.createElement("span",null,D()(t.date_created).format("MMM Do YYYY, h:mm a"))),r.a.createElement($.a.Text,null,t.text)))},X=function(){var e=Object(d.i)(),t=r.a.useState(!0),a=Object(f.a)(t,2),n=a[0],c=a[1],l=r.a.useState({}),o=Object(f.a)(l,2),i=o[0],u=o[1],p=r.a.useCallback(Object(m.a)(s.a.mark((function t(){var a;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,A(e.id);case 2:a=t.sent,u(a),c(!1);case 5:case"end":return t.stop()}}),t)}))),[e.id]);return r.a.useEffect((function(){p()}),[p]),n?r.a.createElement(_.a,{centered:!0,container:!0,columns:"12",style:{minHeight:"80vh"}},r.a.createElement(_.a.Column,{width:"8",verticalAlign:"middle"},r.a.createElement(U.a,{fluid:!0},r.a.createElement(U.a.Header,{image:!0},r.a.createElement(U.a.Line,null),r.a.createElement(U.a.Line,null)),r.a.createElement(U.a.Paragraph,null,r.a.createElement(U.a.Line,null),r.a.createElement(U.a.Line,null),r.a.createElement(U.a.Line,null),r.a.createElement(U.a.Line,null),r.a.createElement(U.a.Line,null),r.a.createElement(U.a.Line,null),r.a.createElement(U.a.Line,{length:"short"}))))):r.a.createElement(_.a,{centered:!0,container:!0,columns:"12",style:{minHeight:"80vh",paddingTop:"20vh"}},r.a.createElement(_.a.Column,{width:"8",verticalAlign:"middle"},r.a.createElement(V.a.Group,null,r.a.createElement(V.a,null,r.a.createElement(V.a.Image,{size:"small",src:i.author.profile.avatar,alt:i.author.profile.full_name||i.author.username}),r.a.createElement(V.a.Content,{style:{marginTop:"2em",textAlign:"left"}},r.a.createElement(V.a.Header,null,i.author.profile.full_name||i.author.username),r.a.createElement(V.a.Meta,null,D()(i.date_created).format("MMM Do YYYY, h:mm a")),r.a.createElement(V.a.Description,{style:{margin:"1em 0"}},r.a.createElement("p",null,i.text)),r.a.createElement(O.a,{style:{marginRight:".5em"}},r.a.createElement(S.a,{name:"comment"}),i.comments.length)))),r.a.createElement(g.a,{textAlign:"left",style:{margin:"10em 0 6em"}},r.a.createElement($.a.Group,{minimal:!0},r.a.createElement(L.a,{as:"h3",dividing:!0},"Comments"),0===i.comments.length?r.a.createElement("p",null,"No comments yet"):i.comments.map((function(e,t){return r.a.createElement(Q,{key:t,data:e})})),r.a.createElement(K,{post_id:i.id,onPostComment:p})))))},Z=function(e){return r.a.createElement(d.d,null,r.a.createElement(d.b,{exact:!0,path:["/feed","/feed/create"],render:function(){return r.a.createElement(R,e)}}),r.a.createElement(d.b,{path:"/feed/:id",component:X}),r.a.createElement(d.a,{from:"*",to:"/feed"}))},ee=a(178),te=function(e){var t=e.user,a=e.onAuth,n=r.a.useState("view"),c=Object(f.a)(n,2),l=c[0],o=c[1],u=r.a.useState({full_name:{value:t.profile.full_name||"",valid:null,validate:function(e){return e.length>=2}}}),d=Object(f.a)(u,2),p=d[0],h=d[1],E=r.a.useState(!1),w=Object(f.a)(E,2),x=w[0],y=w[1],j=r.a.useState({show:!1,message:""}),O=Object(f.a)(j,2),C=O[0],P=O[1],A=function(e){h({full_name:Object(i.a)({},p.full_name,{value:t.profile.full_name||""})}),o(e)},I=function(){var e=Object(m.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise(function(){var e=Object(m.a)(s.a.mark((function e(t,a){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b("auth");case 2:t("success");case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}());case 2:a(null);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(_.a,{centered:!0,container:!0,columns:"12",style:{minHeight:"80vh"}},r.a.createElement(_.a.Column,{width:"6",verticalAlign:"middle"},r.a.createElement(Y.a,{placeholder:!0},r.a.createElement(L.a,{as:"h3",icon:!0,textAlign:"center",style:{margin:"1em 0"}},r.a.createElement(S.a,{as:ee.a,size:"mini",circular:!0,src:t.profile.avatar,style:{width:86,height:86}}),t.profile.full_name?t.profile.full_name:t.username),r.a.createElement(M.a,{error:C.show,loading:x,style:{padding:"1em 0"}},"edit"===l?r.a.createElement(g.a,{textAlign:"left",style:{marginBottom:"1em"}},r.a.createElement(M.a.Input,{icon:"user circle",iconPosition:"left",name:"full_name",label:"Full name",placeholder:"Your full name",value:p.full_name.value,onChange:function(e){h(Object(i.a)({},p,Object(T.a)({},e.target.name,Object(i.a)({},p[e.target.name],{valid:null,value:e.target.value}))))},error:!1===p.full_name.valid&&{content:"Full name should contains minimum 2 symbols",pointing:"above"}}),r.a.createElement(z.a,{error:!0,header:"Error",content:C.message,style:{maxWidth:"15rem",margin:"0 auto"}})):null,"view"===l?r.a.createElement(k.a,{icon:!0,labelPosition:"left",onClick:function(){return A("edit")}},r.a.createElement(S.a,{name:"edit outline"}),"Update profile"):r.a.createElement(g.a,{fluid:!0,textAlign:"center",style:{margin:"1em 0"}},r.a.createElement(k.a.Group,null,r.a.createElement(k.a,{content:"Save",primary:!0,onClick:function(){var e=Object(i.a)({},p);for(var t in p)e=Object(i.a)({},e,Object(T.a)({},t,Object(i.a)({},e[t],{valid:e[t].validate(e[t].value)})));(h(e),e.full_name.valid)&&(y(!0),function(e){return new Promise(function(){var t=Object(m.a)(s.a.mark((function t(a,n){var r,c,l;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v("auth");case 2:if((r=t.sent)&&r.userId&&r.token){t.next=5;break}return t.abrupt("return",a(null));case 5:return t.next=7,fetch("/api/auth/update-profile",{method:"POST",headers:{"Content-Type":"application/json",Authorization:r.token},body:JSON.stringify({userId:r.userId,token:r.token,profile:e})});case 7:return c=t.sent,t.next=10,c.json();case 10:l=t.sent,c.ok||n(l.message||"Something went wrong..."),a(l);case 13:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}())}({full_name:e.full_name.value}).then((function(e){y(!1),P({show:!1,message:""}),a(e),A("view")})).catch((function(e){y(!1),P({show:!0,message:e})})))}}),r.a.createElement(k.a.Or,null),r.a.createElement(k.a,{content:"Cancel",secondary:!0,onClick:function(){return A("view")}}))),r.a.createElement(k.a,{size:"small",compact:!0,icon:!0,labelPosition:"right",onClick:I,style:{marginTop:"3em"}},r.a.createElement(S.a,{name:"log out"}),"log out")))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(o.a,null,r.a.createElement((function(){var e=r.a.useState({isAuthenticated:!1,userId:"",username:"",profile:{},token:""}),t=Object(f.a)(e,2),a=t[0],c=t[1],l=r.a.useState(!0),o=Object(f.a)(l,2),u=o[0],v=o[1],E=r.a.useState("..."),b=Object(f.a)(E,2),x=b[0],y=b[1];Object(n.useEffect)((function(){function e(){return(e=Object(m.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w();case 2:(t=e.sent)&&j(t),v(!1);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]);var j=function(e){c(null!==e?Object(i.a)({isAuthenticated:!0},e):{isAuthenticated:!1,userId:"",token:""})},O={feed_length:x,setFeedLength:function(e){return y(e)}};return u?r.a.createElement(p.a,{active:!0},r.a.createElement(h.a,null)):a.isAuthenticated?r.a.createElement(g.a,{style:{padding:"64px 0"}},r.a.createElement(I,O),r.a.createElement(d.d,null,r.a.createElement(d.b,{exact:!0,path:"/",component:H}),r.a.createElement(d.b,{path:"/feed",render:function(){return r.a.createElement(Z,O)}}),r.a.createElement(d.b,{path:"/profile",render:function(){return r.a.createElement(te,{user:a,onAuth:j})}}),r.a.createElement(d.a,{from:"*",to:"/"}))):r.a.createElement(d.d,null,r.a.createElement(d.b,{exact:!0,path:"/login",render:function(){return r.a.createElement(J,{onAuth:j})}}),r.a.createElement(d.a,{from:"*",to:"/login"}))}),null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[189,1,2]]]);
//# sourceMappingURL=main.61ad7044.chunk.js.map